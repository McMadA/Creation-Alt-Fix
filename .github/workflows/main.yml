name: ğŸš€ Nieuwe update jonguh

on:
  push:
    branches:
      - main

jobs:
  web-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸšš Get latest code
        uses: actions/checkout@v4
      - name: ğŸ–¼ï¸ Convert images to WebP
        run: |
          sudo apt-get install -y -qq webp
          for file in images/*.png; do
            cwebp -q 80 "$file" -o "${file%.png}.webp"
          done
      - name: ğŸ—œï¸ Minify CSS and JS
        run: |
          npm install -g clean-css-cli terser
          for file in css/*.css; do
            cleancss -o "$file" "$file"
          done
          for file in js/*.js; do
            terser "$file" -o "$file" --compress --mangle
          done
      - name: ğŸ“‚ Sync files via FTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: web0156.zxcs.nl # Alleen de hostnaam
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          protocol: ftp # Of ftps als je server dat ondersteunt
          port: 21 # Kan weggelaten worden als het de standaard FTP poort is
          server-dir: domains/creationaltfix.nl/public_html/ # Pad op de server, eindigend met een slash
